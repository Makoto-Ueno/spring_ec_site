<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{user/common/head :: meta_header('商品一覧',~{::link},~{})}">
	<link th:href="@{/css/user/index.css}" rel="stylesheet" />
</head>

<body>
	<div th:replace="~{user/common/header :: header_fragment}"></div>

	<!-- --------------------------- -->
	<!-- main -->
	<main>
		<h3 class="text-center mt-5">商品一覧</h3>
		<div class="px-5 py-5">
			<div class="container-fluid">
				<div class="row">
					<th:block th:if="${products == null && searchKeyword == null}">
						<h4 class="text-center">現在商品が販売されていません。</h4>
					</th:block>
					<th:block th:if="${products == null && searchKeyword != null}">
						<h4 class="text-center">"<span th:text="${searchKeyword}"></span>"に一致する商品は見つかりませんでした。</h4>
					</th:block>
					<th:block th:if="${products != null}" th:each="product : ${products}">
						<div class="col-sm-6 col-md-6 col-lg-4 col-xl-3 col-xxl-2 py-3">
							<a class="text-not-decoration" th:href="@{/{productId}(productId = ${product.productId})}">
								<div class="card">
									<img class="bg-light"
										th:src="${#strings.isEmpty(product.imageUrl)} ? @{/img/no-image.png} : ${product.imageUrl}"
										alt="">
									<div class="card-body">
										<h5 class="card-title" th:text="${product.name}"></h5>
										<p th:if="${product.stock.quantity == 0}" class="card-text text-danger">現在在庫切れです
										</p>
										<p th:if="${product.stock.quantity > 0}" class="card-text"
											th:text="'¥'+${#strings.length(product.amount) < 4 ? product.amount : #numbers.formatInteger(product.amount, 3, 'COMMA')}">
										</p>
									</div>
								</div>
							</a>
						</div>
					</th:block>
				</div>
			</div>
		</div>

		<!-- --------------------------- -->
		<!-- pagenation -->
		<ul class="pagination mb-5" th:if="${page != null}">
			<li class="page-item" th:classappend="${page.first} ? 'disabled' : ''">
				<a class="page-link" th:href="@{/(page = ${page.number} - 1)}">&laquo;</a>
			</li>
			<li th:each="i : ${#numbers.sequence(0, page.totalPages - 1)}" class="page-item"
				th:classappend="(${i} == ${page.number}) ? 'active' : ''">
				<a class="page-link" th:href="@{/(page = ${i})}" th:text="${i + 1}"></a>
			</li>
			<li class="page-item" th:classappend="${page.last} ? 'disabled' : ''">
				<a class="page-link" th:href="@{/(page = ${page.number} + 1)}">&raquo;</a>
			</li>
		</ul>
		<!-- pagenation -->
		<!-- --------------------------- -->
	</main>
	<!-- main -->
	<!-- --------------------------- -->

	<div th:replace="~{user/common/footer :: footer_fragment}"></div>
</body>

</html>