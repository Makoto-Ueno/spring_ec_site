<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link th:href="@{/css/common/bootstrap.css}" rel="stylesheet">
	<link th:href="@{/css/admin/product-registration.css}" rel="stylesheet">
	<script th:src="@{/js/common/bootstrap.js}" crossorigin="anonymous"></script>
	<script th:src="@{/js/admin/select-image.js}" crossorigin="anonymous"></script>

	<title>商品登録 | Spring EC</title>
</head>

<body>
	<div class="contents">
		<div th:replace="~{common/header :: header_fragment}"></div>
		<main>
			<section class="py-5">
				<div class="container px-3 px-lg-5 mb-5">
					<div class="d-flex justify-content-center">
						<div class="alert alert-dismissible alert-danger mb-5">
							<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
							画像のアップロードに失敗しました
						</div>
					</div>
					<form action="/admin/product/new" method="post" th:object="${productRegistForm}">
						<div class="row gx-4 gx-lg-5 align-items-center">
							<div class="col-md-6 text-center mb-5">
								<div class="mb-md-0 img-wrapper">
									<img id="output" class="card-img-top bg-light" th:src="@{/img/no_image.png}"
										alt="NO IMAGE">
									<div class="img-edit">
										<a class="nav-link dropdown-toggle py-1 px-2 image-edit-btn"
											data-bs-toggle="dropdown" role="button" aria-haspopup="true"
											aria-expanded="false">編集</a>
										<div class="dropdown-menu">
											<input type="file" name="image" id="image" accept="image/*"
												onchange="showSelectedImage(event, '#output')">
											<label class="dropdown-item" id="btn-file" for="image">写真を選択</label>
											<a class="dropdown-item"
												onclick="deleteSelectedImage('#image', '#output')">写真を削除</a>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="fs-5 mb-4">
									<label for="productName" class="form-label">商品名</label>
									<input id="productName" type="text" th:field="*{name}" class="form-control w-100" placeholder="商品名" name="name">
									<p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" style="color: red;"></p>
								</div>
								<div class="fs-5 mb-4">
									<div>
										<label for="amount" class="form-label">価格</label>
										<div>
											<div class="input-group">
												<span class="input-group-text">¥</span>
												<input id="amount" type="number" th:field="*{amount}" class="form-control" aria-label="価格"
													placeholder="1000" name="amount">
													<p th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}" style="color: red;"></p>
											</div>
										</div>
									</div>
								</div>
								
								<div class="fs-5 mb-4">
									<label for="description" class="form-label">商品説明</label>
									<textarea class="form-control w-100" th:field="*{description}" id="description" rows="3"
										placeholder="商品説明" name="description"></textarea>
										<p th:if="${#fields.hasErrors('description')}" th:errors="*{description}" style="color: red;"></p>
								</div>
								<div class="fs-5 mb-4">
									<label for="stock" class="form-label">在庫数</label>
									<input id="stock" type="number" th:field="*{quantity}" class="form-control w-100" value="1"
										placeholder="10" name="quantity">
										<p th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}" style="color: red;"></p>
								</div>
								<div class="text-center">
									<button class="btn btn-dark me-3">登録する</button>
								</div>
							</div>
						</div>
					</form>
				</div>
			</section>
		</main>
		<div th:replace="~{common/footer :: footer_fragment}"></div>
	</div>
</body>

</html>